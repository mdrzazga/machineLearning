{"name":"Machinelearning","tagline":"","body":"Practical Machine Learning - project\r\n========================================================\r\n\r\nLet's load training data ...\r\n\r\n```r\r\nlibrary(caret)\r\npml.training <- read.csv(\"http://d396qusza40orc.cloudfront.net/predmachlearn/pml-training.csv\")\r\ntable(complete.cases(pml.training))\r\n```\r\n\r\n```\r\n## \r\n## FALSE  TRUE \r\n## 19216   406\r\n```\r\nThe training data look sparse , so we will use only the numerical properties of which contain the complete data\r\n\r\n\r\n```r\r\ncolClass <-lapply(pml.training, class)\r\ncolVect =c()\r\nfor(cc in colClass){colVect <- c(colVect,cc)}\r\ncolVect\r\n```\r\n\r\n```\r\n##   [1] \"integer\" \"factor\"  \"integer\" \"integer\" \"factor\"  \"factor\"  \"integer\"\r\n##   [8] \"numeric\" \"numeric\" \"numeric\" \"integer\" \"factor\"  \"factor\"  \"factor\" \r\n##  [15] \"factor\"  \"factor\"  \"factor\"  \"numeric\" \"integer\" \"factor\"  \"numeric\"\r\n##  [22] \"integer\" \"factor\"  \"numeric\" \"integer\" \"factor\"  \"numeric\" \"numeric\"\r\n##  [29] \"numeric\" \"numeric\" \"numeric\" \"numeric\" \"numeric\" \"numeric\" \"numeric\"\r\n##  [36] \"numeric\" \"numeric\" \"numeric\" \"numeric\" \"integer\" \"integer\" \"integer\"\r\n##  [43] \"integer\" \"integer\" \"integer\" \"numeric\" \"numeric\" \"numeric\" \"integer\"\r\n##  [50] \"numeric\" \"numeric\" \"numeric\" \"numeric\" \"numeric\" \"numeric\" \"numeric\"\r\n##  [57] \"numeric\" \"numeric\" \"numeric\" \"numeric\" \"numeric\" \"numeric\" \"integer\"\r\n##  [64] \"integer\" \"integer\" \"integer\" \"integer\" \"integer\" \"factor\"  \"factor\" \r\n##  [71] \"factor\"  \"factor\"  \"factor\"  \"factor\"  \"numeric\" \"numeric\" \"integer\"\r\n##  [78] \"numeric\" \"numeric\" \"integer\" \"numeric\" \"numeric\" \"integer\" \"numeric\"\r\n##  [85] \"numeric\" \"numeric\" \"factor\"  \"factor\"  \"factor\"  \"factor\"  \"factor\" \r\n##  [92] \"factor\"  \"numeric\" \"numeric\" \"factor\"  \"numeric\" \"numeric\" \"factor\" \r\n##  [99] \"numeric\" \"numeric\" \"factor\"  \"integer\" \"numeric\" \"numeric\" \"numeric\"\r\n## [106] \"numeric\" \"numeric\" \"numeric\" \"numeric\" \"numeric\" \"numeric\" \"numeric\"\r\n## [113] \"numeric\" \"numeric\" \"numeric\" \"integer\" \"integer\" \"integer\" \"integer\"\r\n## [120] \"integer\" \"numeric\" \"numeric\" \"numeric\" \"numeric\" \"factor\"  \"factor\" \r\n## [127] \"factor\"  \"factor\"  \"factor\"  \"factor\"  \"numeric\" \"numeric\" \"factor\" \r\n## [134] \"numeric\" \"numeric\" \"factor\"  \"numeric\" \"numeric\" \"factor\"  \"integer\"\r\n## [141] \"numeric\" \"numeric\" \"numeric\" \"numeric\" \"numeric\" \"numeric\" \"numeric\"\r\n## [148] \"numeric\" \"numeric\" \"numeric\" \"numeric\" \"numeric\" \"numeric\" \"integer\"\r\n## [155] \"integer\" \"integer\" \"integer\" \"numeric\" \"numeric\" \"factor\"\r\n```\r\n\r\n```r\r\ncolVect <-c()\r\nfor(i in 1:length(colClass)){colVect<-c(colVect,grepl(\"numeric\",colClass[i])&&(!anyNA(pml.training[,i])))}\r\ncolVect[length(colVect)] <- TRUE\r\n\r\ntrain <- pml.training[,colVect]\r\nhead(train)\r\n```\r\n\r\n```\r\n##   roll_belt pitch_belt yaw_belt gyros_belt_x gyros_belt_y gyros_belt_z\r\n## 1      1.41       8.07    -94.4         0.00         0.00        -0.02\r\n## 2      1.41       8.07    -94.4         0.02         0.00        -0.02\r\n## 3      1.42       8.07    -94.4         0.00         0.00        -0.02\r\n## 4      1.48       8.05    -94.4         0.02         0.00        -0.03\r\n## 5      1.48       8.07    -94.4         0.02         0.02        -0.02\r\n## 6      1.45       8.06    -94.4         0.02         0.00        -0.02\r\n##   roll_arm pitch_arm yaw_arm gyros_arm_x gyros_arm_y gyros_arm_z\r\n## 1     -128      22.5    -161        0.00        0.00       -0.02\r\n## 2     -128      22.5    -161        0.02       -0.02       -0.02\r\n## 3     -128      22.5    -161        0.02       -0.02       -0.02\r\n## 4     -128      22.1    -161        0.02       -0.03        0.02\r\n## 5     -128      22.1    -161        0.00       -0.03        0.00\r\n## 6     -128      22.0    -161        0.02       -0.03        0.00\r\n##   roll_dumbbell pitch_dumbbell yaw_dumbbell gyros_dumbbell_x\r\n## 1         13.05         -70.49       -84.87                0\r\n## 2         13.13         -70.64       -84.71                0\r\n## 3         12.85         -70.28       -85.14                0\r\n## 4         13.43         -70.39       -84.87                0\r\n## 5         13.38         -70.43       -84.85                0\r\n## 6         13.38         -70.82       -84.47                0\r\n##   gyros_dumbbell_y gyros_dumbbell_z magnet_dumbbell_z roll_forearm\r\n## 1            -0.02             0.00               -65         28.4\r\n## 2            -0.02             0.00               -64         28.3\r\n## 3            -0.02             0.00               -63         28.3\r\n## 4            -0.02            -0.02               -60         28.1\r\n## 5            -0.02             0.00               -68         28.0\r\n## 6            -0.02             0.00               -66         27.9\r\n##   pitch_forearm yaw_forearm gyros_forearm_x gyros_forearm_y\r\n## 1         -63.9        -153            0.03            0.00\r\n## 2         -63.9        -153            0.02            0.00\r\n## 3         -63.9        -152            0.03           -0.02\r\n## 4         -63.9        -152            0.02           -0.02\r\n## 5         -63.9        -152            0.02            0.00\r\n## 6         -63.9        -152            0.02           -0.02\r\n##   gyros_forearm_z magnet_forearm_y magnet_forearm_z classe\r\n## 1           -0.02              654              476      A\r\n## 2           -0.02              661              473      A\r\n## 3            0.00              658              469      A\r\n## 4            0.00              658              469      A\r\n## 5           -0.02              655              473      A\r\n## 6           -0.03              660              478      A\r\n```\r\nbuild a model \r\n\r\n```r\r\nfit.rf <- randomForest(train$classe ~. , data= train)\r\nfit.rf\r\n```\r\n\r\n```\r\n## \r\n## Call:\r\n##  randomForest(formula = train$classe ~ ., data = train) \r\n##                Type of random forest: classification\r\n##                      Number of trees: 500\r\n## No. of variables tried at each split: 5\r\n## \r\n##         OOB estimate of  error rate: 0.36%\r\n## Confusion matrix:\r\n##      A    B    C    D    E class.error\r\n## A 5576    4    0    0    0   0.0007168\r\n## B    9 3779    8    0    1   0.0047406\r\n## C    0    9 3396   17    0   0.0075979\r\n## D    0    0   14 3199    3   0.0052861\r\n## E    0    1    1    4 3601   0.0016634\r\n```\r\nload and select test\r\n\r\n```r\r\npml.testing <- read.csv(\"http://d396qusza40orc.cloudfront.net/predmachlearn/pml-testing.csv\")\r\ntest <- pml.testing[,colVect]\r\nhead(test)\r\n```\r\n\r\n```\r\n##   roll_belt pitch_belt yaw_belt gyros_belt_x gyros_belt_y gyros_belt_z\r\n## 1    123.00      27.00    -4.75        -0.50        -0.02        -0.46\r\n## 2      1.02       4.87   -88.90        -0.06        -0.02        -0.07\r\n## 3      0.87       1.82   -88.50         0.05         0.02         0.03\r\n## 4    125.00     -41.60   162.00         0.11         0.11        -0.16\r\n## 5      1.35       3.33   -88.60         0.03         0.02         0.00\r\n## 6     -5.92       1.59   -87.70         0.10         0.05        -0.13\r\n##   roll_arm pitch_arm yaw_arm gyros_arm_x gyros_arm_y gyros_arm_z\r\n## 1     40.7    -27.80     178       -1.65        0.48       -0.18\r\n## 2      0.0      0.00       0       -1.17        0.85       -0.43\r\n## 3      0.0      0.00       0        2.10       -1.36        1.13\r\n## 4   -109.0     55.00    -142        0.22       -0.51        0.92\r\n## 5     76.1      2.76     102       -1.96        0.79       -0.54\r\n## 6      0.0      0.00       0        0.02        0.05       -0.07\r\n##   roll_dumbbell pitch_dumbbell yaw_dumbbell gyros_dumbbell_x\r\n## 1        -17.74          24.96       126.24             0.64\r\n## 2         54.48         -53.70       -75.51             0.34\r\n## 3         57.07         -51.37       -75.20             0.39\r\n## 4         43.11         -30.05      -103.32             0.10\r\n## 5       -101.38         -53.44       -14.20             0.29\r\n## 6         62.19         -50.56       -71.12            -0.59\r\n##   gyros_dumbbell_y gyros_dumbbell_z magnet_dumbbell_z roll_forearm\r\n## 1             0.06            -0.61               -56          141\r\n## 2             0.05            -0.71               -36          109\r\n## 3             0.14            -0.34                41          131\r\n## 4            -0.02             0.05                53            0\r\n## 5            -0.47            -0.46               312         -176\r\n## 6             0.80             1.10                96          150\r\n##   pitch_forearm yaw_forearm gyros_forearm_x gyros_forearm_y\r\n## 1         49.30       156.0            0.74           -3.34\r\n## 2        -17.60       106.0            1.12           -2.78\r\n## 3        -32.60        93.0            0.18           -0.79\r\n## 4          0.00         0.0            1.38            0.69\r\n## 5         -2.16       -47.9           -0.75            3.10\r\n## 6          1.46        89.7           -0.88            4.26\r\n##   gyros_forearm_z magnet_forearm_y magnet_forearm_z problem_id\r\n## 1           -0.59              419              617          1\r\n## 2           -0.18              791              873          2\r\n## 3            0.28              698              783          3\r\n## 4            1.80              783              521          4\r\n## 5            0.80             -787               91          5\r\n## 6            1.35              800              884          6\r\n```\r\npredict test\r\n\r\n```r\r\nrf.pred <- predict(fit.rf, test)\r\nrf.pred\r\n```\r\n\r\n```\r\n##  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 \r\n##  B  A  B  A  A  E  D  B  A  A  B  C  B  A  E  E  A  B  B  B \r\n## Levels: A B C D E\r\n```\r\n\r\n\r\n\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}